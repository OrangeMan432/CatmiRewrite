# Các bước thực hiện trong công việc
steps:
  # 1. Checkout mã nguồn
  - name: Checkout repository
    uses: actions/checkout@v4
    
  # 2. Thiết lập môi trường Java
  # Minecraft 1.12.2 (Forge) yêu cầu Java 8 để biên dịch
  - name: Set up Java 8
    uses: actions/setup-java@v4
    with:
      distribution: 'temurin' # Sử dụng bản phân phối Temurin (OpenJDK)
      java-version: '8'      # Yêu cầu Java 8
      cache: 'gradle'        # Tăng tốc độ build bằng cách cache các dependencies của Gradle

  # 3. Cấp quyền thực thi cho gradlew
  - name: Grant execute permission for gradlew
    run: chmod +x gradlew
    
  # 4. Chạy lệnh build (lệnh build mod tiêu chuẩn)
  # 'reobfJar' là task để tạo ra file mod .jar cuối cùng đã được obfuscate lại.
  - name: Build with Gradle
    run: ./gradlew build reobfJar
    
  # 5. Tải lên Artifact (Tùy chọn nhưng Rất Nên làm)
  # Bước này giúp bạn dễ dàng tải xuống file .jar đã build mà không cần vào log build.
  - name: Upload Artifact
    uses: actions/upload-artifact@v4
    with:
      # Thường file mod .jar nằm ở thư mục build/libs/
      # Tên file sẽ giống như: CatmiRewrite-1.12.2-VERSION.jar
      name: mod-jar-1.12.2
      path: build/libs/*.jar
      if-no-files-found: error # Gây lỗi nếu không tìm thấy file .jar
      retention-days: 7 # Giữ file build trong 7 ngày
